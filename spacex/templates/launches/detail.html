{% extends "spacex/base.html" %}

{% load static %}

{% block title %}{{ launch.name }}{% endblock %}

{% block body %}
    <div class="grid-x">
        <div class="cell small-8" id="launch-detail" data-something>
            <div class="callout clearfix">
                <div class="grid-x grid-margin-x">
                    <div class="cell auto">
                        <h1>{{ launch.name }}</h1>
                        <nav aria-label="Pagination">
                            <ul class="pagination">
                                {% if page_obj.has_previous %}
                                    <li class="pagination-previous"><a href={% url 'spacex:launch.detail' page_obj.previous_page_number %} aria-label="Previous launch">Previous <span class="show-for-sr">launch</span></a></li>
                                    <li><a href={% url 'spacex:launch.detail' page_obj.previous_page_number %} aria-label="Launch {{ page_obj.previous_page_number }}">{{ page_obj.previous_page_number }}</a></li>
                                {% else %}
                                    <li class="pagination-previous disabled">Previous <span class="show-for-sr">launch</span></li>
                                {% endif %}
                                <li class="current"><span class="show-for-sr">You're on launch</span> {{ page_obj.number }}</li>
                                {% if page_obj.has_next %}
                                    <li><a href={% url 'spacex:launch.detail' page_obj.next_page_number %} aria-label="Launch {{ page_obj.next_page_number }}">{{ page_obj.next_page_number }}</a></li>
                                    <li class="pagination-next"><a href={% url 'spacex:launch.detail' page_obj.next_page_number %} aria-label="Next page">Next <span class="show-for-sr">page</span></a></li>
                                {% else %}
                                    <li class="pagination-next disabled">Next <span class="show-for-sr">launch</span></li>
                                {% endif %}
                            </ul>
                        </nav>
                        <div class="grid-x">
                            <div class="cell shrink">
                                {% if launch.success == True %}
                                    <div class="callout success display-inline">Successful Launch</div>
                                {% elif launch.success == False %}
                                    <div class="callout alert">Launch Failure</div>
                                {% elif launch.upcoming == True %}
                                    <div class="callout primary">Upcoming Launch</div>
                                {% endif %}
                            </div>
                        </div>
                        <div class="callout">
                            <h4>Flight Summary</h4>
                            <hr>
                            <div class="grid-x small-up-1 medium-up-2 large-up-2" data-equalizer data-equalize-by-row="true">
                                <div class="cell">
                                    <p>Flight Number</p>
                                </div>
                                <div class="cell">
                                    <p>{{ launch.flight_number }}</p>
                                </div>
                                <div class="cell">
                                    <p>Date</p>
                                </div>
                                <div class="cell">
                                    <p>{{ launch.date_local|date:"D, d M Y" }}</p>
                                </div>
                                <div class="cell">
                                    <p>Time</p>
                                </div>
                                <div class="cell">
                                    <p>{{ launch.date_local|date:"h:i:s A" }}</p>
                                </div>
                                <div class="cell">
                                    <p>Rocket</p>
                                </div>
                                <div class="cell">
                                    <p><a href={% url 'spacex:rocket.detail' launch.rocket.sanitized_name %}>{{ launch.rocket.name }}</a></p>
                                </div>
                                <div class="cell">
                                    <p>Launchpad</p>
                                </div>
                                <div class="cell">
                                    <p><a href={% url 'spacex:launchpad.detail' launch.launchpad.sanitized_name %}>{{ launch.launchpad.full_name }}</a></p>
                                </div>
                            </div>
                            <div class="callout secondary">
                                <p>{{ launch.details }}</p>
                            </div>
                        </div>
                        <ul class="tabs" data-tabs id="launch-tabs">
                            <li class="tabs-title is-active"><a data-tabs-target="rocket-panel" aria-selected="true">Rocket</a></li>
                            <li class="tabs-title"><a data-tabs-target="payload-panel">Payload</a></li>
                            <li class="tabs-title"><a data-tabs-target="launchpad-panel">Launchpad</a></li>
                            {% if launch.crew %}
                                <li class="tabs-title"><a data-tabs-target="panel4">Crew</a></li>
                            {% endif %}
                            {% if launch.core %}
                                <li class="tabs-title"><a data-tabs-target="core-panel">Core</a></li>
                            {% endif %}
                        </ul>
                        <div class="tabs-content" data-tabs-content="launch-tabs">
                            <div class="tabs-panel is-active" id="rocket-panel">
                                <h4>{{ launch.rocket.name }}</h4>
                                {% if launch.rocket.active == True %}
                                    <div class="callout success">Active</div>
                                {% else %}
                                    <div class="callout alert">Retired</div>
                                {% endif %}
                                <p>{{ launch.rocket.description }}</p>
                            </div>
                            <div class="tabs-panel" id="payload-panel">
                                {% for payload in launch.payload_set.all %}
                                    <h4>{{ payload.name }} - {{ payload.type }}</h4>
                                {% endfor %}
                                <p>Suspendisse dictum feugiat nisl ut dapibus.  Vivamus hendrerit arcu sed erat molestie vehicula. Ut in nulla enim. Phasellus molestie magna non est bibendum non venenatis nisl tempor.  Sed auctor neque eu tellus rhoncus ut eleifend nibh porttitor.</p>
                            </div>
                            <div class="tabs-panel" id="launchpad-panel">
                                <h4>{{ launch.launchpad.full_name }}</h4>
                                {% if launch.launchpad.active == True %}
                                    <div class="callout success">Active</div>
                                {% else %}
                                    <div class="callout alert">Retired</div>
                                {% endif %}
                                <p>{{ launch.launchpad.details }}</p>
                            </div>
                            <div class="tabs-panel" id="core-panel">
                                {% for core in launch.core_set.all  %}
                                    <h4>{{ core.serial }}</h4>
                                {% endfor %}
                                <h4>{{ launch.launchpad.full_name }}</h4>
                                {% if launch.launchpad.active == True %}
                                    <div class="callout success">Active</div>
                                {% else %}
                                    <div class="callout alert">Retired</div>
                                {% endif %}
                                <p>{{ launch.launchpad.details }}</p>
                            </div>
                        </div>
                        {% if launch.upcoming %}
                            <p>Launch date is tentative, stated launch date is accurate to the {{ launch.date_precision }}.</p>               
                        {% endif %}
                        {% if launch.tbd %}
                            <p>The launch date is to be determined.</p>
                        {% endif %}
                    </div>
                    <div class="cell shrink">
                        <div class="grid-y">
                            {% if launch.links.patch.small %}
                                <div class="cell thumbnail">
                                    <img src="{{ launch.links.patch.small }}" >
                                </div>
                            {% endif %}
                            {% if launch.links.presskit or launch.links.wikipedia or launch.links.youtube_id %}
                                <div class="cell">
                                    <div class="grid-y">
                                        {% if launch.links.wikipedia %}
                                            <div class="cell text-right">
                                                <a href={{ launch.links.webcast }} class="alert button" target="_blank">Watch Webcast</a>
                                            </div>
                                        {% endif %}
                                        {% if launch.links.wikipedia %}
                                            <div class="cell text-right">
                                                <a href={{ launch.links.wikipedia }} class="secondary button" target="_blank">Wikipedia</a>
                                            </div>
                                        {% endif %}
                                        {% if launch.links.presskit %}
                                            <div class="cell text-right">
                                                <a href={{ launch.links.presskit }} class="button" target="_blank">Download Press Kit</a>
                                            </div>
                                        {% endif %}
                                    </div>
                                </div>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="cell small-4" data-sticky-container>
            <div class="sticky" data-sticky data-anchor="launch-detail">
                <div class="grid-x">
                    <div class="cell">
                        <div class="orbit-slide" role="region" aria-label="Favorite Space Pictures" data-orbit>
                            <ul class="orbit-container">
                                {% comment %} <button class="orbit-previous" aria-label="previous"><span class="show-for-sr">Previous Slide</span>&#9664;</button>
                                <button class="orbit-next" aria-label="next"><span class="show-for-sr">Next Slide</span>&#9654;</button> {% endcomment %}
                                {% for url in launch.links.flickr.original %}
                                    {% if forloop.first %}
                                        <li class="is-active orbit-slide">
                                            <img class="orbit-image" src={{ url }} alt="Launch {{ forloop.counter }}">
                                        </li>
                                    {% else %}
                                        <li class="orbit-slide">
                                            <img class="orbit-image" src={{ url }} alt="Launch {{ forloop.counter }}">
                                        </li>
                                    {% endif %}
                                {% endfor %}
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock  %}